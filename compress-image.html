<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Image Compression Tool</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:#fff;
}

/* HEADER */
header{
  text-align:center;
  padding:60px 20px 40px;
}
header h1{
  font-size:36px;
  margin-bottom:10px;
}
header p{
  opacity:.85;
  font-size:16px;
}

/* CONTAINER */
.container{
  max-width:950px;
  margin:0 auto 90px;
  padding:20px;
}

/* CARD */
.card{
  background:rgba(255,255,255,0.10);
  backdrop-filter:blur(14px);
  padding:40px;
  border-radius:26px;
  box-shadow:0 25px 60px rgba(0,0,0,.35);
}

/* DROP AREA */
.drop{
  border:2px dashed rgba(255,255,255,.45);
  border-radius:20px;
  padding:35px 20px;
  text-align:center;
  cursor:pointer;
  transition:.25s;
}
.drop:hover{
  background:rgba(255,255,255,.06);
}
.drop strong{
  font-size:18px;
}
.drop span{
  font-size:14px;
  opacity:.8;
}

/* SLIDER */
label{
  display:block;
  margin:25px 0 8px;
}
input[type=range]{
  width:100%;
}

/* PREVIEW */
#preview{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(90px,1fr));
  gap:14px;
  margin:25px 0;
}
#preview img{
  width:100%;
  height:90px;
  object-fit:cover;
  border-radius:14px;
  box-shadow:0 6px 18px rgba(0,0,0,.35);
}

/* BUTTON */
button{
  width:100%;
  padding:18px;
  border:none;
  border-radius:18px;
  font-size:18px;
  background:linear-gradient(135deg,#ff512f,#dd2476);
  color:#fff;
  cursor:pointer;
  margin-top:10px;
}
button:hover{opacity:.95}

/* INFO */
#info{
  text-align:center;
  margin-top:14px;
  opacity:.9;
}
</style>
</head>

<body>

<header>
  <h1>ðŸ–¼ Image Compression Tool</h1>
  <p>Batch compress images directly in your browser</p>
</header>

<div class="container">
  <div class="card">

    <label class="drop">
      <strong>Drag & Drop Images</strong><br>
      <span>or click to upload</span>
      <input type="file" id="images" multiple accept="image/*" hidden>
    </label>

    <label>
      Compression Level:
      <b><span id="qv">70%</span></b>
    </label>

    <input type="range" id="qr" min="10" max="100" value="70"
      oninput="qv.innerText=this.value+'%'">

    <div id="preview"></div>

    <button onclick="compressAll()">Compress Images & Download ZIP</button>

    <p id="info"></p>

  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

<script>
const input = document.getElementById("images");
const preview = document.getElementById("preview");
const info = document.getElementById("info");

input.addEventListener("change", () => {
  preview.innerHTML = "";
  [...input.files].forEach(file => {
    const img = document.createElement("img");
    img.src = URL.createObjectURL(file);
    preview.appendChild(img);
  });
});

async function compressAll(){
  const files = input.files;
  const quality = document.getElementById("qr").value / 100;

  if(!files.length){
    info.innerText = "Please select images first.";
    return;
  }

  info.innerText = "Compressing images...";
  const zip = new JSZip();

  for(const file of files){
    const dataURL = await new Promise(res=>{
      const r = new FileReader();
      r.onload = e => res(e.target.result);
      r.readAsDataURL(file);
    });

    const img = new Image();
    await new Promise(res=>{
      img.onload = res;
      img.src = dataURL;
    });

    const canvas = document.createElement("canvas");
    canvas.width = img.width;
    canvas.height = img.height;
    canvas.getContext("2d").drawImage(img,0,0);

    const blob = await new Promise(res =>
      canvas.toBlob(res,"image/jpeg",quality)
    );

    zip.file(file.name.replace(/\.\w+$/,".jpg"),blob);
  }

  const zipBlob = await zip.generateAsync({type:"blob"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(zipBlob);
  a.download = "compressed-images.zip";
  a.click();

  info.innerText = "Done! ZIP downloaded.";
}
</script>

</body>
</html>
